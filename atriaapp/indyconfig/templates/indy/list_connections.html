{% extends 'base.html' %}

{% load i18n %}

{% block page_title %} {% trans "List Connections" %} {% endblock %}

{% block main_content %} 

<p> Wallet: {{ wallet_name }} </p>
<p>
  <ul class="connections">
    {% for connection in connections %}
      <li>
        {{ connection.partner_name }} {{ connection.connection_type }} {{ connection.status }}
        {% if connection.status == 'Pending' %}
            <a href={% url 'indyconfig:connection_response' %}?id={{connection.id}}>Respond</a>
        {% endif %}
        {% if connection.status == 'Sent' %}
            <a href={% url 'indyconfig:check_connection' %}?id={{connection.id}}>Check Status</a>
        {% endif %}
        {% if connection.status == 'Active' %}
          {% if connection.connection_type == 'Outbound' %}
            <a href={% url 'indyconfig:select_credential_offer' %}?connection_id={{connection.id}}>Send Credential</a> 
            or 
          {% endif %}
          <a href={% url 'indyconfig:select_proof_request' %}?connection_id={{connection.id}}>Send Proof Request</a>
          {% if connection.connection_type == 'Inbound' %}
            or
            <a href={% url 'indyconfig:check_messages' %}?connection_id={{connection.id}}>Poll for Messages</a>
          {% endif %}
        {% endif %}
      </li>
    {% endfor %}
  </ul>
</p>
<p>
  <a href="{% url 'indyconfig:send_invitation' %}">{% trans "Send Connection Invite" %}</a>
</p>
<p>
  <a href="{% url 'indyconfig:connection_response' %}?id=0">{% trans "Respond to (External) Connection Invite" %}</a>
</p>

{% endblock %}
