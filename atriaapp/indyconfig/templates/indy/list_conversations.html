{% extends 'base.html' %}

{% load i18n %}

{% block page_title %} {% trans "List Conversations" %} {% endblock %}

{% block main_content %} 

<p> Wallet: {{ wallet_name }} </p>

<p>
  <ul class="conversations">
    {% for conversation in conversations %}
      <li>
        {{ conversation.connection_partner_name }} {{ conversation.conversation_type }} {{ conversation.status }}
        {% if conversation.status == 'Pending' %}
          {% if conversation.conversation_type == 'CredentialOffer' %}
            <a href={% url 'indyconfig:cred_offer_response' %}?conversation_id={{conversation.id}}>Accept Offer</a>
          {% endif %}
          {% if conversation.conversation_type == 'ProofRequest' %}
            <a href={% url 'indyconfig:proof_req_response' %}?conversation_id={{conversation.id}}>Supply Proof</a>
          {% endif %}
        {% endif %}
        {% if conversation.status == 'Sent' %}
            <a href={% url 'indyconfig:check_conversation' %}?conversation_id={{conversation.id}}>Check Status</a>
        {% endif %}
        {% if conversation.status == 'Accepted' %}
            [Completed]
          {% if conversation.conversation_type == 'ProofRequest' %}
            Proof is {{ conversation.proof_state }}
          {% endif %}
        {% endif %}
      </li>
    {% endfor %}
  </ul>
</p>

<p><a href={% url 'indyconfig:check_messages' %}>Poll for Messages on All Connections</a></p>

{% endblock %}
